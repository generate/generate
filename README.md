# generate [![NPM version](https://img.shields.io/npm/v/generate.svg)](https://www.npmjs.com/package/generate) [![Build Status](https://img.shields.io/travis/generate/generate.svg)](https://travis-ci.org/generate/generate)

> Fast, composable, highly extendable project generator with a user-friendly and expressive API.

- [Install](#install)
- [Quickstart example](#quickstart-example)
- [What is generate?](#what-is-generate-)
  * [Feature Highlights](#feature-highlights)
- [Getting started](#getting-started)
  * [Install](#install-1)
  * [Overview](#overview)
  * [Tasks intro](#tasks-intro)
  * [Generators intro](#generators-intro)
- [Common mistakes](#common-mistakes)
  * [Wrong context](#wrong-context)
  * [Invoking a generator from itself](#invoking-a-generator-from-itself)
  * [Wrong cwd](#wrong-cwd)
- [API](#api)
  * [Task API](#task-api)
  * [File System API](#file-system-api)
- [CLI](#cli)
  * [Commands](#commands)
- [Authoring generators](#authoring-generators)
- [Conventions](#conventions)
  * [Template naming conventions](#template-naming-conventions)
  * [Generator naming conventions](#generator-naming-conventions)
- [TODO](#todo)
  * [Why use generate instead of X?](#why-use-generate-instead-of-x-)
- [Related projects](#related-projects)
- [Running tests](#running-tests)
- [Contributing](#contributing)
- [Author](#author)
- [License](#license)

_(TOC generated by [verb](https://github.com/verbose/verb))_

## Install

Install with [npm](https://www.npmjs.com/):

```sh
$ npm i generate --save
```

## Quickstart example

The easiest way to get started is to create a generator that exports a function. To do so, create a `generator.js` file, and add the following code:

```js
module.exports = function(app) {
  app.task('default', function(cb) {
    console.log('task > default');
    cb();
  });

  app.task('foo', function(cb) {
    console.log('task > foo');
    cb();
  });
};
```

Now, in the command line run `gen` to execute the `default` task. If all is successful you should see the line: `task > default`.

Next, try running `gen foo` to execute the `foo` task.

## What is generate?

Generate is a fast, composable, highly-extendable project generator with an unobtrusive CLI and a user-friendly and expressive API.

### Feature Highlights

* [x] Run local or globally-installed generators
* [x] Run sub-generators using simple dot-notation. Supports any level of nesting!
* [x] Run [gulp](http://gulpjs.com)-style "tasks" and uses some of the same underlying libraries as gulp
* [x] Built on [assemble-core][] with support for both [gulp](http://gulpjs.com) and [assemble](http://assemble.io) plugins
* [x] Generators can extend and use other generators
* [x] Generators, sub-generators and tasks can be run by command line, API, or both.
* [x] Run tasks from any generator or sub-generator, programmatically or via CLI
* [x] Easy to add functionality and features to generate using via plugins
* [x] Supports any template engine
* [x] First class support for template collections, including pagination, sorting, groups, and more.
* [x] supports middleware that can be run on all files or specific files, and at specific points during the _build process_ (like `onLoad`, `preRender`, `postRender`, etc)

## Getting started

* [Install](#install)
* [Overview](#overview)
* [Tasks](#tasks)
* [Generators](#generators)
* [sub-generators](#sub-generators)

### Install

To get started, you'll first need to install `generate` globally using [npm](https://docs.npmjs.com/), along with any generators you'd like to run.

**Install Generate**

Install globally with [npm](https://www.npmjs.com/)

```sh
$ npm i -g generate
```

### Overview

### Tasks intro

Tasks are powered by [bach](https://github.com/phated/bach) by [@phated](https://github.com/phated) and [composer](https://github.com/jonschlinkert/composer) by [@doob](https://github.com/doowb), and they work exactly the same way as [gulp](http://gulpjs.com) tasks.

**Register tasks:**

```js
gen.task('foo', function() {
  // do stuff
});

gen.task('bar', function(cb) {
  // optional callback
  cb();
});
```

**Run tasks:**

Run task `foo`:

```js
gen.build('foo', function(err) {
  if (err) throw err;
});
```

Run tasks `foo` and `bar`:

```js
gen.build(['foo', 'bar'], function(err) {
  if (err) throw err;
});
```

**Task CLI**

Run task `foo` from the command line:

```sh
$ gen foo
```

Run tasks `foo` and `bar` from the command line:

```sh
$ gen foo bar
```

### Generators intro

Generators are functions that can be used to wrap tasks or other code in a highly decoupled and reusable way.

**Register generators:**

```js
gen.register('project', function(app) {
  app.task('readme', function() {
    return app.src('readme.tmpl')
      .pipe(app.dest(function() {
        file.basename = 'reamde.md';
        return process.cwd();
      });
  });

  app.task('readme', function() {
    return app.src('readme.tmpl')
      .pipe(app.dest(function() {
        file.basename = 'reamde.md';
        return process.cwd();
      });
  });

  app.task('default', ['readme']);
});
```

Note that generators may also be registered with the `.generator` method. The `.register` and `.generator` methods both accomplish the same goal _with one crucial difference_:

* `.register` lazily requires and/or invokes the generator function
* `.generator` immediately requires and/or invokes the generator function

**Run generators and their tasks:**

Run the default task in generator `project`:

```js
gen.generate('project', function(err) {
  if (err) throw err;
});

// or
gen.generate('project', ['default'], function(err) {
  if (err) throw err;
});

// or
gen.generate('project:default', function(err) {
  if (err) throw err;
});
```

Run tasks `foo` and `bar` on generator `project`

```js
gen.generate('project', ['foo', 'bar'], function(err) {
  if (err) throw err;
});

// or
gen.generate('project:foo,bar', function(err) {
  if (err) throw err;
});
```

**Generator CLI**

Run the default task on generator `project` from the command line:

```sh
$ gen project
# or
$ gen project:default
```

Run tasks `foo` and `bar` on generator `project` from the command line:

```sh
$ gen project:foo,bar
```

## Common mistakes

### Wrong context

Make sure tasks and generators are defined on the correct instance. The example below illustrates this point.

_(In sub-generator `bar`, task `a` is incorrectly defined on `app` (the parent generator. Of course, you can do this if you want, but it's usually done by accident.)_

```js
gen.register('foo', function(foo) {
  foo.register('bar', function(bar) {
    // WRONG
    foo.task('a', function() {});

    // CORRECT
    bar.task('b', function() {});
  });
});
```

### Invoking a generator from itself

For example, invoking the `default` generator from inside the `default` generator will cause infinite recursion.

```js
gen.register('default', function(app) {
  // wrong
  app.invoke('default');

  // correct
  app.invoke('any-other-generator');
});
```

### Wrong cwd

Whenever possible, to ensure that cwd is set correctly for a generator, do this:

```js
app.register('foo', 'foo/generator.js');
```

Instead of this:

```js
app.register('foo', require('./foo/generator.js'));
```

Both of these will work, but in the first example, generate will automatically detect the `cwd`. In the second example the `cwd` would need to be explicitly defined.

## API

### [Generate](index.js#L29)

Create an instance of `Generate` with the given `options`

**Params**

* `options` **{Object}**: Settings to initialize with.

**Example**

```js
var Generate = require('generate');
var generate = new Generate();
```

### Task API

{%= depdocs("composer", "index.js") %}

### File System API

{%= depdocs("assemble-fs", "index.js") %}

## CLI

The top level command for invoking generate from the command line is `gen`:

```sh
$ gen 
```

**Tasks or generators**

The `gen` command may be followed by the names of one or more tasks or generators:

```sh
$ gen <generators and tasks>
```

**Options**

Options flags are prefixed with `--` (or `-` for short flags).

```sh
$ gen <generators and tasks> [options]
```

### Commands

_(TODO)_

## Authoring generators

_(TODO)_

## Conventions

### Template naming conventions

**Dotfiles**

Dotfile templates are prefixed with `_`. For example, a `.gitignore` template should be named `_gitignore`.

**Manifests**

Package manifests, like `package.json`, `bower.json`, etc. are prefixed with `$` to prevent them from showing up in searches. For example, a `package.json` template should be named `$package.json`.

### Generator naming conventions

**Do**

Use `generate-` as the prefix, followed by any words of your choosing to describe the purpose of the generator.

**Don't**

Use `generator-` as the prefix, since the word `generator` is already associated with yeoman.

## TODO

* [ ] create and publish generators (we created a handful of generators that we've been using locally, these will be published shortly)
* [ ] CLI docs (started)
* [ ] User help (e.g. when the user does `gen help` or just `gen`)
* [ ] API docs
* [ ] Generator guidelines and conventions

### Why use generate instead of X?

Since [Google's Yeoman][] is probably the most widely recognized project generator in node.js, it's probably easiest to  Generate is similar to yeoman in that both tools can be used to "scaffold out a project", but the two projects approach this challenge very differently.

* Generate is open source and MIT licensed.
* Designed from the ground-up to be a faster, more extensible alternative to the current dominent solutions.
* Generate has an expressive, imperitive API that is strongly influenced by great libraries such as gulp and express.
* Well-tested, _with more than [1,000 unit tests](./test)._

**Comparison to Google's Yeoman**

| Feature | Google's Yeoman | Generate |
| --- | --- | --- |
| License | BSD-2-Clause © Google | MIT |
| CLI                       | yes | yes |
| API                       | yes | yes |
| Tasks                     | no | yes |
| Generators                | yes | yes |
| Sub-generators            | yes | yes |
| "Shared instances"        | yes | yes |
| Template rendering        | basic | any engine |
| Template collections      | no | yes |
| Supports gulp plugins     | no | yes |
| Supports assemble plugins | no | yes |
| Register helpers | no | yes |
| Async helpers | no | yes |
| Routes | no | yes |
| Middleware | no | yes |
| Instance plugins | no | yes |
| Pipeline plugins (streams) | no | yes |
| Config store | yes | yes |

## Related projects

* [assemble](https://www.npmjs.com/package/assemble): Assemble is a powerful, extendable and easy to use static site generator for node.js. Used… [more](https://www.npmjs.com/package/assemble) | [homepage](https://github.com/assemble/assemble)
* [base](https://www.npmjs.com/package/base): base is the foundation for creating modular, unit testable and highly pluggable node.js applications, starting… [more](https://www.npmjs.com/package/base) | [homepage](https://github.com/node-base/base)
* [update](https://www.npmjs.com/package/update): Easily keep anything in your project up-to-date by installing the updaters you want to use… [more](https://www.npmjs.com/package/update) | [homepage](https://github.com/update/update)
* [verb](https://www.npmjs.com/package/verb): Documentation generator for GitHub projects. Verb is extremely powerful, easy to use, and is used… [more](https://www.npmjs.com/package/verb) | [homepage](https://github.com/verbose/verb)

## Running tests

Install dev dependencies:

```sh
$ npm i -d && npm test
```

## Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](https://github.com/jonschlinkert/generate/issues/new).

## Author

**Jon Schlinkert**

* [github/jonschlinkert](https://github.com/jonschlinkert)
* [twitter/jonschlinkert](http://twitter.com/jonschlinkert)

## License

Copyright © 2016 [Jon Schlinkert](https://github.com/jonschlinkert)
Released under the [MIT license](https://github.com/generate/generate/blob/master/LICENSE).

***

_This file was generated by [verb](https://github.com/verbose/verb), v0.9.0, on February 09, 2016._